/* Interstitial code cards (light Rails-Guides vibe) */
:root {
  --code-card-bg: #f6f8fa;
  --code-card-border: #e5e7eb;
  --code-card-accent: #d5dbe3;
  --code-card-radius: 10px;
  --code-card-pad-y: 0.875rem;
  --code-card-pad-x: 1rem;
  --code-fg: #111827;
  --tok-comment: #64748b;
  --tok-keyword: #7c3aed;
  --tok-operator: #374151;
  --tok-string: #065f46;
  --tok-number: #1d4ed8;
  --tok-attr: #b45309;
  --tok-symbol: #0d9488;
}

@supports (color: color-mix(in oklab, white, black)) {
  :root {
    --code-card-bg: color-mix(in oklab, var(--bg), #000 4%);
    --code-card-border: color-mix(in oklab, var(--code-card-bg), #000 10%);
    --code-card-accent: color-mix(in oklab, var(--code-card-bg), #000 18%);
  }
}

/* Card wrapper on the outer code container */
.highlight,
.highlighter-rouge {
  position: relative;
  margin: 1.25rem 0;
  background: var(--code-card-bg);
  border: 1px solid var(--code-card-border);
  border-left: 4px solid var(--code-card-accent);
  border-radius: var(--code-card-radius);
  padding: var(--code-card-pad-y) var(--code-card-pad-x);
}

/* Avoid double boxing for nested .highlight */
.highlighter-rouge .highlight {
  background: transparent;
  border: 0;
  padding: 0;
  margin: 0;
}

/* Pre content */
.highlight>pre,
.highlighter-rouge pre {
  background: transparent;
  color: var(--code-fg);
  border: 0;
  padding: 0;
  margin: 0;
  overflow: auto;
  line-height: 1.55;
  font-size: 0.95rem;
  -webkit-font-smoothing: antialiased;
}

.highlight pre code,
.highlighter-rouge pre code {
  background: transparent;
  padding: 0;
}

/* Inline code as chips (with forgiving spacing) */
p code,
li code,
dd code,
td code {
  background: var(--code-card-bg);
  color: var(--code-fg);
  border: 1px solid var(--code-card-border);
  border-radius: 6px;
  padding: .22em .55em;
  margin: .06em .18em;
  display: inline-block;
  white-space: nowrap;
  vertical-align: baseline;
  font-size: .92em;
}

/* Line numbers table (Rouge) */
.highlighter-rouge .highlight table,
.highlight table {
  width: 100%;
  border-collapse: collapse;
}

.highlighter-rouge .highlight td.gutter,
.highlight td.gutter {
  user-select: none;
  opacity: .7;
  padding-right: .75rem;
  border-right: 1px solid var(--code-card-border);
  background: #f1f4f8;
}

@supports (color: color-mix(in oklab, white, black)) {

  .highlighter-rouge .highlight td.gutter,
  .highlight td.gutter {
    background: color-mix(in oklab, var(--code-card-bg), #000 4%);
  }
}

.highlighter-rouge .highlight td.code,
.highlight td.code {
  padding-left: .75rem;
}

/* Tokens */
.highlight .c {
  color: var(--tok-comment);
  font-style: italic;
}

.highlight .k {
  color: var(--tok-keyword);
}

.highlight .o {
  color: var(--tok-operator);
}

.highlight .s {
  color: var(--tok-string);
}

.highlight .na {
  color: var(--tok-attr);
}

.highlight .nb {
  color: var(--tok-symbol);
}

.highlight .nc {
  color: var(--tok-attr);
  font-weight: 600;
}

.highlight .nf {
  color: var(--tok-symbol);
}

.highlight .nt {
  color: var(--tok-keyword);
}

.highlight .mi,
.highlight .m {
  color: var(--tok-number);
}
